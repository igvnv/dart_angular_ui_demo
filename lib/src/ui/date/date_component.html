<div
  class="input"
  [class.error]="!isValid"
  [class.disabled]="disabled"
>
      <span
        class="label"
        [class.raised]="timeValue!=null"
        [tabindex]="tabindex"
        (focus)="showCalendar()"
      >
        <ng-content></ng-content> <span *ngIf="required">*</span>
      </span>
  <span
    class="currentValue"
    (click)="toggleForm()"
  >{{timeValue | date:'MMMM dd, yyyy'}}</span>
</div>

<span class="error" *ngIf="!isValid">{{invalidMessage}}</span>

<div class="dateSelector" *ngIf="formOpened.isNotEmpty">
  <div *ngIf="formOpened=='calendar'">
    <div class="changeMonth">
      <span class="previous" (click)="showPreviousMonth()"></span>
      <span (click)="calendarMode('months')">{{displayedMonth | date:'yyyy / MMMM'}}</span>
      <span class="next" (click)="showNextMonth()"></span>
    </div>

    <div class="month">
      <ul class="dayNames">
        <li>Mo</li>
        <li>Tu</li>
        <li>We</li>
        <li>Th</li>
        <li>Fr</li>
        <li>Sa</li>
        <li>Su</li>
      </ul>

      <ul>
        <li
          *ngFor="let day of previousMonthDays"
          class="otherMonth"
        >{{day}}</li>
        <li
          *ngFor="let day of monthDays"
          class="displayedMonth"
          [class.currentDate]="isCurrentDate(day)"
          [class.selectedDate]="isSelectedDate(day)"
          (click)="selectDay(day)"
        >{{day}}</li>
        <li
          *ngFor="let day of nextMonthDays"
          class="otherMonth"
        >{{day}}</li>
      </ul>
    </div>
  </div>

  <div *ngIf="formOpened=='months'">
    <div class="changeMonth">
      <span class="previous" (click)="displayYear(displayedMonth.year - 1)"></span>
      <span (click)="calendarMode('years')">{{displayedMonth | date:'yyyy'}}</span>
      <span class="next" (click)="displayYear(displayedMonth.year + 1)"></span>
    </div>

    <div class="monthsList">
      <ul>
        <li
          *ngFor="let monthName of monthsNamesList;let i=index"
          [class.currentDate]="displayedMonth.year==now.year && now.month==i+1"
          [class.selectedDate]="displayedMonth.year==timeValue.year && timeValue.month==i+1"
          (click)="showMonthByNumber(i+1, displayedMonth.year)"
        >{{monthName}}</li>
      </ul>
    </div>
  </div>

  <div *ngIf="formOpened=='years'">
    <div class="changeMonth">
      <span class="previous" (click)="olderYearsList()"></span>
      <span (click)="calendarMode('months')">{{yearsList.first}}-{{yearsList.last}}</span>
      <span class="next" (click)="newerYearsList()"></span>
    </div>

    <div class="yearsList">
      <ul>
        <li
          *ngFor="let year of yearsList"
          [class.currentDate]="now.year==year"
          [class.selectedDate]="timeValue.year==year"
          (click)="displayYear(year);calendarMode('months')"
        >{{year}}</li>
      </ul>
    </div>
  </div>
</div>